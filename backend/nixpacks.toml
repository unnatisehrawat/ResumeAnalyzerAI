# Railway Nixpacks Configuration
# This tells Railway how to build and deploy the app

[phases.setup]
nixPkgs = ["nodejs", "openssl"]

[phases.install]
cmds = ["npm install"]

[phases.build]
# Only generate Prisma client during build
# Migrations CANNOT run here - database not available during build
cmds = ["npx prisma generate"]

[start]
# Run migrations at startup, then start server
cmd = "npx prisma migrate deploy && node server.js"
